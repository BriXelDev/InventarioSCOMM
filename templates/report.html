<!-- 
=============================================================================
REPORT.HTML - DASHBOARD COMPLETO DE REPORTES Y ANALYTICS
=============================================================================

PROP√ìSITO:
Template comprehensivo para visualizaci√≥n de datos de inventario con m√∫ltiples
tipos de reportes, gr√°ficos interactivos, estad√≠sticas clave y alertas de negocio.
Implementa un dashboard ejecutivo completo para toma de decisiones.

CARACTER√çSTICAS PRINCIPALES:
- Dashboard con m√∫ltiples KPIs de inventario
- Gr√°ficos interactivos con Chart.js
- Tablas de datos con alertas visuales
- Exportaci√≥n a CSV e impresi√≥n
- An√°lisis de tendencias temporales
- Sistema de alertas de stock cr√≠tico
- Resumen financiero completo

PATRONES JINJA2 AVANZADOS:
- Filtros de formato num√©rico (%.2f)
- Condicionales para datos opcionales
- Loops con estados vac√≠os
- Filtros de serializaci√≥n (|tojson)
- C√°lculos y agregaciones de datos
- Estados diferenciados por contenido

INTEGRACI√ìN FRONTEND:
- Chart.js para visualizaciones interactivas
- JavaScript para inicializaci√≥n de gr√°ficos
- CSS Grid/Flexbox para layouts responsivos
- Print styles para reportes f√≠sicos
- Export functionality para datos CSV
=============================================================================
-->

{% extends "layout.html" %}
<!-- 
HERENCIA DE LAYOUT COMPLETO:
Aprovecha toda la infraestructura del sistema:
- Navegaci√≥n con Chart.js ya cargado en el head
- Sistema de mensajes flash para feedback
- CSS base responsive y JavaScript compartido
- Integraci√≥n con sistema de autenticaci√≥n
-->

{% block title %}Reportes - Sistema de Inventario{% endblock %}
<!-- 
T√çTULO ESPEC√çFICO PARA ANALYTICS:
Identifica claramente la secci√≥n de reportes y an√°lisis.
-->

{% block head %}
    <!-- 
    CSS ESPEC√çFICO PARA REPORTES:
    Estilos dedicados para:
    - Grid layouts para m√∫ltiples secciones
    - Estilos de cards para estad√≠sticas
    - Contenedores de gr√°ficos responsivos
    - Tablas con estados visuales (alertas)
    - Print styles para reportes f√≠sicos
    - Colores diferenciados por tipo de alerta
    -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/report.css') }}">
{% endblock %}

{% block content %}
<!-- CONTENIDO PRINCIPAL DEL DASHBOARD DE REPORTES -->

<div class="reports-header">
    <!-- 
    HEADER CON ACCIONES DE REPORTE:
    Combina t√≠tulo principal con botones de acci√≥n para exportar datos.
    -->
    <h2 class="reports-title">Reportes del Inventario</h2>
    <!-- 
    T√çTULO PRINCIPAL:
    Identifica claramente la secci√≥n de analytics y reportes.
    -->
    
    <div class="reports-actions">
        <!-- 
        BOTONES DE ACCI√ìN PARA REPORTES:
        Funcionalidades t√≠picas de dashboards ejecutivos.
        -->
        <a href="{{ url_for('export_csv') }}" class="btn export-btn">
            üìä Exportar CSV
        </a>
        <!-- 
        EXPORTACI√ìN A CSV:
        
        URL_FOR('export_csv'):
        Enlace a endpoint que genera archivo CSV con todos los datos.
        
        ICONO DESCRIPTIVO:
        üìä Representa datos/analytics visualmente.
        
        CASOS DE USO:
        - An√°lisis en Excel/Google Sheets
        - Backup de datos para auditor√≠a
        - Integraci√≥n con sistemas externos
        -->
        
        <button onclick="window.print()" class="btn print-btn">
            üñ®Ô∏è Imprimir Reporte
        </button>
        <!-- 
        FUNCI√ìN DE IMPRESI√ìN:
        
        ONCLICK="window.print()":
        JavaScript nativo que abre dialog de impresi√≥n del browser.
        
        CSS PRINT STYLES:
        report.css debe incluir @media print para optimizar layout.
        
        VENTAJAS:
        - No requiere librer√≠as adicionales
        - Respeta configuraci√≥n de impresora del usuario
        - Genera PDF si usuario selecciona "Guardar como PDF"
        -->
    </div>
</div>

<!-- GRID DE ESTAD√çSTICAS PRINCIPALES (KPIs) -->
<div class="stats-grid">
    <!-- 
    LAYOUT DE GRID PARA KPIS:
    Dise√±o responsive que muestra m√©tricas clave en cards.
    CSS Grid permite auto-ajuste seg√∫n espacio disponible.
    -->
    
    <div class="stat-card total-products">
        <!-- 
        CARD DE TOTAL DE PRODUCTOS:
        Primera m√©trica fundamental del inventario.
        -->
        <h3>{{ stats['total_products'] or 0 }}</h3>
        <!-- 
        VALOR CON FALLBACK:
        stats['total_products'] or 0 previene mostrar None.
        Asegura que siempre se muestre un n√∫mero v√°lido.
        -->
        <p>Total de Productos</p>
        <!-- 
        LABEL DESCRIPTIVO:
        Clarifica qu√© representa el n√∫mero mostrado.
        -->
    </div>
    
    <div class="stat-card total-items">
        <h3>{{ stats['total_items'] or 0 }}</h3>
        <!-- 
        TOTAL DE ART√çCULOS:
        Suma de todas las cantidades de todos los productos.
        Diferente de total_products (tipos √∫nicos vs cantidad total).
        -->
        <p>Total de Art√≠culos</p>
    </div>
    
    <div class="stat-card avg-price">
        <h3>${{ "%.2f"|format(stats['avg_price'] or 0) }}</h3>
        <!-- 
        PRECIO PROMEDIO FORMATEADO:
        
        FILTRO FORMAT:
        "%.2f"|format() aplica formato de 2 decimales.
        
        EJEMPLO:
        stats['avg_price'] = 15.6789 ‚Üí "$15.68"
        stats['avg_price'] = None ‚Üí "$0.00"
        
        PREFIJO D√ìLAR:
        Indica moneda claramente para contexto financiero.
        -->
        <p>Precio Promedio</p>
    </div>
    
    <div class="stat-card low-stock">
        <h3>{{ low_stock|length }}</h3>
        <!-- 
        CONTEO DE PRODUCTOS CON STOCK BAJO:
        
        FILTRO |length:
        Cuenta elementos en la lista low_stock.
        
        L√ìGICA:
        low_stock es una lista de productos filtrados por el backend.
        length da el n√∫mero total de productos en estado cr√≠tico.
        -->
        <p>Stock Bajo</p>
    </div>
    
    <div class="stat-card total-value">
        <h3>${{ "%.2f"|format(stats['total_value'] or 0) }}</h3>
        <!-- 
        VALOR TOTAL DEL INVENTARIO:
        KPI financiero cr√≠tico = suma(precio * cantidad) de todos los productos.
        Mismo formato monetario que precio promedio.
        -->
        <p>Valor Total</p>
    </div>
    
    <div class="stat-card no-stock">
        <h3>{{ no_stock|length }}</h3>
        <!-- 
        PRODUCTOS SIN STOCK:
        Conteo de productos con cantidad = 0.
        M√©trica cr√≠tica para reposici√≥n de inventario.
        -->
        <p>Sin Stock</p>
    </div>
</div>

<!-- SECCI√ìN DE GR√ÅFICOS PRINCIPALES -->
<div class="charts-grid">
    <!-- 
    GRID DE GR√ÅFICOS:
    Layout responsive para m√∫ltiples visualizaciones lado a lado.
    -->
    
    <div class="chart-section">
        <h3>Productos por Categor√≠a</h3>
        <!-- 
        GR√ÅFICO DE CATEGOR√çAS CON CONDICIONAL:
        Solo se renderiza si hay datos de categor√≠as disponibles.
        -->
        {% if categories %}
        <!-- 
        VERIFICACI√ìN DE DATOS:
        Previene renderizar canvas vac√≠o si no hay categor√≠as.
        -->
        <div class="report-card chart-container">
            <canvas id="categoryChart"></canvas>
            <!-- 
            CANVAS PARA CHART.JS:
            
            ID ESPEC√çFICO:
            "categoryChart" ser√° referenciado por JavaScript.
            
            INTEGRACI√ìN:
            - Chart.js (cargado en layout.html) renderiza en este canvas
            - JavaScript usa window.reportData.categories
            - T√≠picamente un gr√°fico de pie o donut
            -->
        </div>
        {% else %}
        <!-- 
        ESTADO SIN DATOS:
        Fallback cuando no hay categor√≠as definidas en el sistema.
        -->
        <div class="report-card no-data">
            <p>No hay categor√≠as definidas</p>
        </div>
        {% endif %}
    </div>
    
    <div class="chart-section">
        <h3>Distribuci√≥n de Stock</h3>
        <div class="report-card chart-container">
            <canvas id="stockDistributionChart"></canvas>
            <!-- 
            GR√ÅFICO DE DISTRIBUCI√ìN DE STOCK:
            
            SIN CONDICIONAL:
            Este gr√°fico siempre se muestra porque stock_distribution
            siempre existe (puede estar vac√≠o pero no None).
            
            TIPOS T√çPICOS:
            - Histograma de rangos de stock
            - Gr√°fico de barras por niveles de inventario
            - Distribuci√≥n de productos por cantidad disponible
            -->
        </div>
    </div>
</div>

<!-- Gr√°ficos de tendencias -->
<div class="trends-section">
    <h3>üìà Tendencias de Movimientos (√öltimos 30 d√≠as)</h3>
    <div class="trends-chart-container">
        <canvas id="movementTrendsChart"></canvas>
    </div>
</div>

<!-- Gr√°ficos lado a lado -->
<div class="side-charts-grid">
    <div>
        <h3>Top 10 Productos M√°s Valiosos</h3>
        {% if top_products %}
        <div class="report-table">
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th>Precio</th>
                        <th>Valor Total</th>
                    </tr>
                </thead>
                <tbody>
                    {% for product in top_products %}
                    <tr>
                        <td>{{ product['name'] }}</td>
                        <td>{{ product['quantity'] }}</td>
                        <td>${{ "%.2f"|format(product['price']) }}</td>
                        <td class="total-value-cell">
                            ${{ "%.2f"|format(product['total_value']) }}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No hay productos registrados</p>
        </div>
        {% endif %}
    </div>
    
    <div>
        <h3>Productos M√°s Movidos</h3>
        {% if most_moved_products %}
        <div class="chart-container">
            <canvas id="mostMovedChart"></canvas>
        </div>
        {% else %}
        <div class="empty-state">
            <p>No hay movimientos registrados</p>
        </div>
        {% endif %}
    </div>
</div>

<!-- SECCI√ìN DE ALERTAS CR√çTICAS DE STOCK -->
<div class="alerts-grid">
    <!-- 
    GRID DE ALERTAS:
    Layout para mostrar lado a lado las alertas m√°s cr√≠ticas del inventario.
    -->
    
    <div class="alert-section">
        <h3>üö® Productos con Stock Bajo</h3>
        <!-- 
        ALERTA DE STOCK BAJO CON ICONO:
        üö® Emoji de sirena indica urgencia y necesidad de acci√≥n.
        -->
        {% if low_stock %}
        <!-- 
        CONDICIONAL PARA DATOS DE ALERTA:
        Solo muestra tabla si existen productos con stock bajo.
        -->
        <div class="report-table">
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Stock Actual</th>
                        <th>Stock M√≠nimo</th>
                        <th>Proveedor</th>
                        <!-- 
                        COLUMNAS CR√çTICAS PARA TOMA DE DECISIONES:
                        - Producto: Identificaci√≥n del item
                        - Stock Actual: Cantidad disponible ahora
                        - Stock M√≠nimo: Umbral configurado para reposici√≥n
                        - Proveedor: A qui√©n contactar para restock
                        -->
                    </tr>
                </thead>
                <tbody>
                    {% for product in low_stock %}
                    <!-- 
                    LOOP POR PRODUCTOS EN ESTADO CR√çTICO:
                    low_stock es lista filtrada por el backend donde:
                    quantity <= stock_min
                    -->
                    <tr class="low-stock">
                        <!-- 
                        CLASE CSS PARA ESTADO CR√çTICO:
                        Permite estilos visuales especiales (rojo, destaque).
                        -->
                        <td>{{ product['name'] }}</td>
                        
                        <td class="low-stock-quantity">{{ product['quantity'] }}</td>
                        <!-- 
                        CANTIDAD CON CLASE ESPEC√çFICA:
                        low-stock-quantity permite destacar el valor cr√≠tico.
                        CSS puede aplicar color rojo, bold, etc.
                        -->
                        
                        <td>{{ product['stock_min'] }}</td>
                        <!-- 
                        STOCK M√çNIMO:
                        Umbral configurado por el usuario para cada producto.
                        Cuando quantity <= stock_min, aparece en esta lista.
                        -->
                        
                        <td>{{ product['provider'] or 'N/A' }}</td>
                        <!-- 
                        PROVEEDOR CON FALLBACK:
                        Informaci√≥n crucial para reposici√≥n.
                        'N/A' cuando no est√° definido.
                        -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <!-- 
        ESTADO POSITIVO SIN ALERTAS:
        Cuando no hay productos con stock bajo.
        -->
        <div class="success-state">
            <p>
                ‚úÖ ¬°Excelente! No hay productos con stock bajo.
            </p>
            <!-- 
            MENSAJE POSITIVO CON EMOJI:
            ‚úÖ Checkmark verde comunica estado saludable del inventario.
            Refuerzo positivo para buen manejo de stock.
            -->
        </div>
        {% endif %}
    </div>
    
    <div class="alert-section">
        <h3>‚ùå Productos Sin Stock</h3>
        <!-- 
        ALERTA CR√çTICA DE STOCK CERO:
        ‚ùå Emoji de X roja indica problema severo - productos agotados.
        -->
        {% if no_stock %}
        <!-- 
        PRODUCTOS COMPLETAMENTE AGOTADOS:
        Lista de productos donde quantity = 0.
        -->
        <div class="report-table">
            <table>
                <thead>
                    <tr>
                        <th>Producto</th>
                        <th>Categor√≠a</th>
                        <th>Proveedor</th>
                        <th>Precio</th>
                        <!-- 
                        INFORMACI√ìN CLAVE PARA REPOSICI√ìN:
                        - Producto: Identificaci√≥n del item agotado
                        - Categor√≠a: Tipo de producto para an√°lisis
                        - Proveedor: Contacto para restock urgente
                        - Precio: Valor del item para priorizaci√≥n
                        -->
                    </tr>
                </thead>
                <tbody>
                    {% for product in no_stock %}
                    <!-- 
                    LOOP POR PRODUCTOS AGOTADOS:
                    no_stock filtrado por backend donde quantity = 0.
                    -->
                    <tr class="no-stock-row">
                        <!-- 
                        CLASE CSS PARA ESTADO CR√çTICO:
                        no-stock-row permite estilos de alerta m√°xima.
                        -->
                        <td>{{ product['name'] }}</td>
                        
                        <td>{{ product['category'] or 'N/A' }}</td>
                        <!-- 
                        CATEGOR√çA CON FALLBACK:
                        Permite an√°lisis por tipo de producto agotado.
                        -->
                        
                        <td>{{ product['provider'] or 'N/A' }}</td>
                        <!-- 
                        PROVEEDOR CR√çTICO:
                        Informaci√≥n esencial para reposici√≥n de emergencia.
                        -->
                        
                        <td>${{ "%.2f"|format(product['price']) }}</td>
                        <!-- 
                        PRECIO FORMATEADO:
                        Permite priorizar reposici√≥n por valor del producto.
                        Productos m√°s caros pueden requerir atenci√≥n inmediata.
                        -->
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <!-- 
        ESTADO IDEAL SIN AGOTADOS:
        Todos los productos tienen al menos 1 unidad.
        -->
        <div class="success-state">
            <p>
                ‚úÖ Todos los productos tienen stock.
            </p>
            <!-- 
            MENSAJE POSITIVO:
            Estado ideal del inventario sin productos agotados.
            -->
        </div>
        {% endif %}
    </div>
</div>

<!-- Productos recientes -->
<div class="recent-products-section">
    <h3>üìÖ Productos Agregados Recientemente (√öltimos 30 d√≠as)</h3>
    {% if recent_products %}
    <div class="report-table">
        <table>
            <thead>
                <tr>
                    <th>Producto</th>
                    <th>Categor√≠a</th>
                    <th>Cantidad</th>
                    <th>Precio</th>
                    <th>Fecha de Creaci√≥n</th>
                </tr>
            </thead>
            <tbody>
                {% for product in recent_products %}
                <tr>
                    <td>{{ product['name'] }}</td>
                    <td>{{ product['category'] or 'N/A' }}</td>
                    <td>{{ product['quantity'] }}</td>
                    <td>${{ "%.2f"|format(product['price']) }}</td>
                    <td>{{ product['created_at'] }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="empty-state">
        <p>No se han agregado productos en los √∫ltimos 30 d√≠as.</p>
    </div>
    {% endif %}
</div>

<!-- Resumen financiero -->
<div class="financial-summary">
    <h3>üí∞ Resumen Financiero</h3>
    <div class="financial-grid">
        <div class="financial-item">
            <strong>Precio M√≠nimo:</strong> ${{ "%.2f"|format(stats['min_price'] or 0) }}
        </div>
        <div class="financial-item">
            <strong>Precio M√°ximo:</strong> ${{ "%.2f"|format(stats['max_price'] or 0) }}
        </div>
        <div class="financial-item">
            <strong>Precio Promedio:</strong> ${{ "%.2f"|format(stats['avg_price'] or 0) }}
        </div>
        <div class="financial-item">
            <strong>Valor Total del Inventario:</strong> ${{ "%.2f"|format(stats['total_value'] or 0) }}
        </div>
    </div>
</div>

<!-- INTEGRACI√ìN JAVASCRIPT PARA GR√ÅFICOS -->
{% block scripts %}
    <!-- 
    JAVASCRIPT ESPECIALIZADO PARA REPORTES:
    report.js contiene funciones para inicializar todos los gr√°ficos.
    -->
    <script src="{{ url_for('static', filename='js/report.js') }}"></script>
    <script>
        // DATOS DEL REPORTE PARA JAVASCRIPT
        // Transferencia segura de datos de Flask a frontend
        
        window.reportData = {
            // DATOS CONDICIONALES PARA GR√ÅFICOS
            // Solo incluye propiedades si los datos existen
            
            {% if categories %}
            // CATEGOR√çAS PARA GR√ÅFICO DE PIE/DONUT
            // Solo se incluye si hay categor√≠as definidas en el sistema
            categories: {{ categories|tojson }},
            {% endif %}
            
            // DISTRIBUCI√ìN DE STOCK (SIEMPRE PRESENTE)
            // Datos para histograma o gr√°fico de barras de niveles de stock
            stockDistribution: {{ stock_distribution|tojson }},
            
            {% if movement_trends %}
            // TENDENCIAS DE MOVIMIENTOS (30 D√çAS)
            // Datos temporales para gr√°fico de l√≠neas
            movementTrends: {{ movement_trends|tojson }},
            {% endif %}
            
            {% if most_moved_products %}
            // PRODUCTOS M√ÅS MOVIDOS
            // Top 10 para gr√°fico de barras horizontales
            mostMovedProducts: {{ most_moved_products|tojson }}
            {% endif %}
        };
        
        // INICIALIZACI√ìN CUANDO DOM EST√Å LISTO
        // Espera a que todos los canvas est√©n disponibles
        document.addEventListener('DOMContentLoaded', function() {
            // VERIFICACI√ìN DE FUNCI√ìN ANTES DE LLAMAR
            // Previene errores si report.js no carga correctamente
            if (typeof window.initializeChartsWithData === 'function') {
                // LLAMADA CON DATOS PREPARADOS
                // Pasa todos los datos necesarios para renderizar gr√°ficos
                window.initializeChartsWithData(window.reportData);
            }
        });
    </script>
{% endblock %}
{% endblock %}

<!-- 
=============================================================================
RESUMEN T√âCNICO - REPORT.HTML:
=============================================================================

PROP√ìSITO:
Dashboard ejecutivo completo para an√°lisis y toma de decisiones sobre inventario.
Implementa m√∫ltiples visualizaciones, KPIs cr√≠ticos, alertas de negocio y 
capacidades de exportaci√≥n para reportes comprehensivos.

CARACTER√çSTICAS IMPLEMENTADAS:

1. DASHBOARD DE KPIs EJECUTIVOS:
   - 6 m√©tricas clave con valores calculados
   - Grid responsive para m√∫ltiples dispositivos
   - Formato monetario consistente con 2 decimales
   - Contadores din√°micos con filtros |length

2. SISTEMA DE VISUALIZACIONES AVANZADO:
   - Gr√°ficos interactivos con Chart.js
   - Canvas elements para m√∫ltiples tipos de charts
   - Datos condicionales para optimizaci√≥n de rendimiento
   - Estados fallback para datos inexistentes

3. ALERTAS CR√çTICAS DE NEGOCIO:
   - Productos con stock bajo (quantity <= stock_min)
   - Productos sin stock (quantity = 0)
   - Estados positivos cuando no hay alertas
   - Informaci√≥n contextual para toma de decisiones

4. CAPACIDADES DE REPORTE:
   - Exportaci√≥n CSV para an√°lisis externo
   - Funci√≥n de impresi√≥n con print styles
   - Tablas detalladas con informaci√≥n completa
   - Resumen financiero con estad√≠sticas clave

5. INTEGRACI√ìN FRONTEND-BACKEND AVANZADA:
   - Transferencia selectiva de datos con |tojson
   - Inicializaci√≥n segura de JavaScript
   - Verificaci√≥n de funciones antes de llamar
   - Datos estructurados para m√∫ltiples gr√°ficos

PATRONES JINJA2 ESPECIALIZADOS:

- FORMATO NUM√âRICO AVANZADO:
  "%.2f"|format(stats['avg_price'] or 0) (2 decimales con fallback)

- CONTADORES DIN√ÅMICOS:
  {{ low_stock|length }} (cuenta elementos en listas)

- CONDICIONALES PARA OPTIMIZACI√ìN:
  if categories (solo renderiza si hay datos)

- VALORES POR DEFECTO CONSISTENTES:
  product['provider'] or 'N/A' (fallbacks descriptivos)

- CLASES CSS DIN√ÅMICAS:
  class="stat-card total-products" (estilos espec√≠ficos)

- SERIALIZACI√ìN SELECTIVA:
  categories|tojson (solo si existe)

TIPOS DE VISUALIZACIONES:

1. GR√ÅFICOS INTERACTIVOS:
   - categoryChart: Distribuci√≥n por categor√≠as (pie/donut)
   - stockDistributionChart: Niveles de inventario (barras)
   - movementTrendsChart: Tendencias temporales (l√≠neas)
   - mostMovedChart: Top productos (barras horizontales)

2. TABLAS DE DATOS:
   - Top 10 productos m√°s valiosos
   - Productos con stock bajo (alertas)
   - Productos sin stock (cr√≠ticos)
   - Productos agregados recientemente

3. M√âTRICAS CLAVE (KPIs):
   - Total productos √∫nicos
   - Total art√≠culos en inventario
   - Precio promedio del inventario
   - Valor total del inventario
   - Conteo de alertas cr√≠ticas

ALERTAS DE NEGOCIO IMPLEMENTADAS:

- STOCK BAJO (üö®):
  Productos donde quantity <= stock_min
  Informaci√≥n: nombre, stock actual, m√≠nimo, proveedor

- SIN STOCK (‚ùå):
  Productos donde quantity = 0
  Informaci√≥n: nombre, categor√≠a, proveedor, precio

- ESTADOS POSITIVOS (‚úÖ):
  Mensajes de confirmaci√≥n cuando no hay alertas
  Refuerzo positivo para buen manejo

CAPACIDADES DE EXPORTACI√ìN:

- EXPORTACI√ìN CSV:
  Enlace a endpoint que genera archivo descargable
  Datos completos para an√°lisis externo

- IMPRESI√ìN:
  window.print() con estilos optimizados
  Generaci√≥n de PDFs desde browser

INTEGRACI√ìN JAVASCRIPT:

- DATOS ESTRUCTURADOS:
  window.reportData con propiedades condicionales
  Solo incluye datos existentes para optimizaci√≥n

- INICIALIZACI√ìN SEGURA:
  Verificaci√≥n de funciones antes de ejecutar
  DOMContentLoaded para timing correcto

- GR√ÅFICOS DIN√ÅMICOS:
  Chart.js renderiza basado en datos de Flask
  Responsive y interactivos

CASOS DE USO EJECUTIVOS:
- Revisi√≥n semanal de KPIs de inventario
- Identificaci√≥n de productos para reposici√≥n
- An√°lisis de tendencias de movimientos
- Reportes financieros de inventario
- Alertas tempranas de problemas de stock
- Decisiones de compras basadas en datos

DEPENDENCIAS T√âCNICAS:
- layout.html con Chart.js preconfigurado
- report.css para layouts especializados
- report.js para inicializaci√≥n de gr√°ficos
- Backend con c√°lculos estad√≠sticos
- Sistema de alertas autom√°tico

CONSIDERACIONES DE RENDIMIENTO:
- Datos condicionales evitan transferir informaci√≥n innecesaria
- Canvas elements solo se crean si hay datos
- Estados fallback previenen errores de renderizado
- Inicializaci√≥n diferida hasta que DOM est√© listo

EXTENSIBILIDAD:
- F√°cil agregar nuevos KPIs al grid
- Nuevos tipos de gr√°ficos con canvas adicionales
- Alertas personalizables por tipo de negocio
- Filtros temporales para an√°lisis hist√≥rico
- Integraci√≥n con sistemas BI externos
=============================================================================
-->